"use strict";(self["webpackChunkcompany_manage"]=self["webpackChunkcompany_manage"]||[]).push([[389],{5472:function(e,t,a){a.d(t,{Z:function(){return d}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top"},[a("div",{staticClass:"add"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("新增 ")])],1),a("div",{staticClass:"serach"},[a("el-input",{attrs:{placeholder:e.placeholder,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询 ")])],1)])},l=[],o={name:"SearchBar",data(){return{keywords:""}},props:{placeholder:String},methods:{add(){this.$emit("onAdd")},search(){this.$emit("onSearch")}}},i=o,r=a(1001),n=(0,r.Z)(i,s,l,!1,null,"a7cca2a6",null),d=n.exports},9389:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"employess"},[a("search-bar",{ref:"searchBar",attrs:{placeholder:e.placeholder},on:{onAdd:e.addButton,onSearch:e.serach,onShowAll:e.getList}}),a("div",{staticClass:"tabel"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.employeesTabel.slice((e.currentPage-1)*e.PageSize,e.currentPage*e.PageSize),border:""}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"员工号",width:"150"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"200"}}),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"120"}}),a("el-table-column",{attrs:{prop:"age",label:"年龄",width:"120"}}),a("el-table-column",{attrs:{prop:"department",label:"部门",width:"200"}}),a("el-table-column",{attrs:{prop:"date",label:"入职时间",width:"250"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"300"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.editButton(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1)]],2),a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.PageSize,"page-sizes":e.PageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"add"===e.operateType?"新增员工":"更新员工",visible:e.dialogAddEdit},on:{"update:visible":function(t){e.dialogAddEdit=t}}},[a("el-form",{ref:"employeesData",attrs:{model:e.employeesData,rules:e.rules}},[a("el-form-item",{attrs:{label:"员工号",prop:"id","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"员工号默认自增,无须添加",autocomplete:"off",disabled:""},model:{value:e.employeesData.id,callback:function(t){e.$set(e.employeesData,"id",t)},expression:"employeesData.id"}})],1),a("el-form-item",{attrs:{label:"名字",prop:"name","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.employeesData.name,callback:function(t){e.$set(e.employeesData,"name",t)},expression:"employeesData.name"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.employeesData.sex,callback:function(t){e.$set(e.employeesData,"sex",t)},expression:"employeesData.sex"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1),a("el-form-item",{attrs:{label:"年龄",prop:"age","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.employeesData.age,callback:function(t){e.$set(e.employeesData,"age",t)},expression:"employeesData.age"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"department","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.employeesData.department,callback:function(t){e.$set(e.employeesData,"department",t)},expression:"employeesData.department"}},[a("el-option",{attrs:{label:"行政部",value:"行政部"}}),a("el-option",{attrs:{label:"财务部",value:"财务部"}}),a("el-option",{attrs:{label:"人事部",value:"人事部"}}),a("el-option",{attrs:{label:"研发部",value:"研发部"}}),a("el-option",{attrs:{label:"营销部",value:"营销部"}})],1)],1),a("el-form-item",{attrs:{label:"入职时间",prop:"date","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"date",autocomplete:"off"},model:{value:e.employeesData.date,callback:function(t){e.$set(e.employeesData,"date",t)},expression:"employeesData.date"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"address","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请以“xx省-xx市-xx区/县”的格式输入员工地址",autocomplete:"off"},model:{value:e.employeesData.address,callback:function(t){e.$set(e.employeesData,"address",t)},expression:"employeesData.address"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(t){return e.onSubmit("employeesData")}}},[e._v("确 定")])],1)],1)],1)},l=[],o=a(5472),i={name:"Employees",data(){return{placeholder:"请输入员工名字查询",dialogAddEdit:!1,operateType:"add",employeesTabel:[],employeesData:{id:"",name:"",sex:"",age:"",department:"",date:"",address:""},rules:{name:[{required:!0,message:"名字不能为空",trigger:"blur"},{min:2,max:12,message:"名字长度为2-12位",trigger:"blur"}],sex:[{required:!0,message:"性别不能为空",trigger:"blur"}],age:[{required:!0,message:"年龄不能为空",trigger:"blur"},{min:2,max:2,message:"年龄为2位",trigger:"blur"}],department:[{required:!0,message:"部门不能为空",trigger:"blur"}],date:[{required:!0,message:"入职日期不能为空",trigger:"blur"}],address:[{required:!0,message:"地址不能为空",trigger:"blur"},{min:6,max:30,message:"地址长度为6-30位",trigger:"blur"}]},keywords:"",formLabelWidth:"100px",currentPage:1,totalCount:1,PageSize:10,PageSizes:[5,10,20,50]}},components:{SearchBar:o.Z},methods:{getList(){this.$axios.get("/employees/getData").then((e=>{console.log(e);const{code:t,data:a}=e.data;200===t&&(this.totalCount=a.total,this.employeesTabel=a.employeesList)}))},addinit(){this.employeesData={id:"",name:"",sex:"",age:"",department:"",date:"",address:""}},addButton(){this.addinit(),this.operateType="add",this.dialogAddEdit=!0},editButton(e){this.employeesData=e,this.operateType="edit",this.dialogAddEdit=!0},cancel(){this.$message({message:"操作取消",type:"info"}),this.getList(),this.dialogAddEdit=!1},onSubmit(e){this.$refs[e].validate((e=>{e?("add"===this.operateType?this.add():this.edit(),this.dialogAddEdit=!1,console.log("success submit!!")):console.log("error submit!!")}))},add(){this.$axios.post("/employees/add",{params:{employeesData:this.employeesData}}).then((e=>{console.log(e);const{code:t,message:a}=e.data;200===t?(this.getList(),this.$message({message:a,type:"success"})):this.$message({type:"info",message:a})}))},serach(){var e=this.$refs.searchBar.keywords;console.log(e),this.$axios.post("/employees/search",{params:{keywords:e}}).then((e=>{console.log(e);const{code:t,message:a,data:s}=e.data;200===t?(this.totalCount=s.total,this.employeesTabel=s.searchList,this.$message({type:"success",message:a})):(this.getList(),this.$message({type:"info",message:a}))}))},edit(){this.$axios.post("/employees/edit",{params:{employeesData:this.employeesData}}).then((e=>{console.log(e);const{code:t,message:a}=e.data;200===t?(this.getList(),this.$message({message:a,type:"success"})):this.$message({type:"info",message:"编辑操作失败"})}))},del(e){this.$confirm("此操作将永久删除该员工, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.post("/employees/del",{params:{id:e.id}}).then((e=>{console.log(e);const{code:t,message:a}=e.data;200===t?(this.getList(),this.$message({type:"success",message:a})):this.$message({type:"info",message:a})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除员工！"})}))},handleSizeChange(e){this.PageSize=e,this.currentPage=1,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()}},mounted(){this.getList()}},r=i,n=a(1001),d=(0,n.Z)(r,s,l,!1,null,"0ee6000f",null),p=d.exports}}]);
//# sourceMappingURL=389.6d7dc14e.js.map