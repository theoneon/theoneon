"use strict";(self["webpackChunkcompany_manage"]=self["webpackChunkcompany_manage"]||[]).push([[155],{5472:function(e,a,t){t.d(a,{Z:function(){return d}});var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"top"},[t("div",{staticClass:"add"},[t("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("新增 ")])],1),t("div",{staticClass:"serach"},[t("el-input",{attrs:{placeholder:e.placeholder,clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.keywords,callback:function(a){e.keywords=a},expression:"keywords"}}),t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("查询 ")])],1)])},i=[],o={name:"SearchBar",data(){return{keywords:""}},props:{placeholder:String},methods:{add(){this.$emit("onAdd")},search(){this.$emit("onSearch")}}},n=o,l=t(1001),r=(0,l.Z)(n,s,i,!1,null,"a7cca2a6",null),d=r.exports},6155:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"admin"},[t("search-bar",{ref:"searchBar",attrs:{placeholder:e.placeholder},on:{onAdd:e.addButton,onSearch:e.serach,onShowAll:e.getList}}),t("div",{staticClass:"tabel"},[[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.adminTabel.slice((e.currentPage-1)*e.PageSize,e.currentPage*e.PageSize),border:""}},[t("el-table-column",{attrs:{fixed:"",prop:"id",label:"id号",width:"200"}}),t("el-table-column",{attrs:{label:"头像",prop:"image"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{attrs:{src:e.row.image,"min-width":"70",height:"70"}})]}}])}),t("el-table-column",{attrs:{prop:"name",label:"账号",width:"250"}}),t("el-table-column",{attrs:{prop:"password",label:"密码",width:"250"}}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(t){return e.editButton(a.row)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(t){return e.del(a.row)}}},[e._v("删除")])]}}])})],1)]],2),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.PageSize,"page-sizes":e.PageSizes,layout:"total, sizes, prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"add"===e.operateType?"新增管理员":"更新管理员",visible:e.dialogAddEdit},on:{"update:visible":function(a){e.dialogAddEdit=a}}},[t("el-form",{ref:"adminData",attrs:{model:e.adminData,rules:e.rules}},[t("el-form-item",{attrs:{label:"id号",prop:"id","label-width":e.formLabelWidth}},[t("el-input",{attrs:{placeholder:"id号默认自增,无须添加",autocomplete:"off",disabled:""},model:{value:e.adminData.id,callback:function(a){e.$set(e.adminData,"id",a)},expression:"adminData.id"}})],1),t("el-form-item",{attrs:{label:"上传头像",prop:"image","label-width":e.formLabelWidth}},[e._e(),t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:"/admin/upload","before-upload":e.beforeUpload,"on-change":e.handleChange,"auto-upload":!1,data:e.adminData}},[e.adminData.image?t("img",{staticClass:"avatar",attrs:{src:e.adminData.image}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t("el-form-item",{attrs:{label:"账号",prop:"name","label-width":e.formLabelWidth}},[t("el-input",{attrs:{placeholder:"请输入账号",autocomplete:"off"},model:{value:e.adminData.name,callback:function(a){e.$set(e.adminData,"name",a)},expression:"adminData.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password","label-width":e.formLabelWidth}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.adminData.password,callback:function(a){e.$set(e.adminData,"password",a)},expression:"adminData.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancel}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary",plain:!0},on:{click:function(a){return e.onSubmit("adminData")}}},[e._v("确 定")])],1)],1)],1)},i=[],o=t(5472),n={name:"Admin",data(){return{placeholder:"请输入账号查询",dialogAddEdit:!1,operateType:"add",adminTabel:[],adminData:{id:"",image:"",name:"",password:""},rules:{image:[{required:!0,message:"头像不能为空",trigger:"blur"}],name:[{required:!0,message:"账号不能为空",trigger:"blur"},{min:4,max:10,message:"账号为4-10位",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:4,max:12,message:"密码长度为4-12位",trigger:"blur"}]},keywords:"",formLabelWidth:"100px",currentPage:1,totalCount:1,PageSize:10,PageSizes:[5,10,20,50]}},components:{SearchBar:o.Z},methods:{handleChange(e){this.adminData.image=URL.createObjectURL(e.raw)},beforeUpload(e){return console.log(e),!0},getList(){this.$axios.get("/admin/getData").then((e=>{console.log(e);const{code:a,data:t}=e.data;200===a&&(this.totalCount=t.total,this.adminTabel=t.adminList)}))},addinit(){this.adminData={id:"",image:"",name:"",password:""}},addButton(){this.addinit(),this.operateType="add",this.dialogAddEdit=!0},editButton(e){this.adminData=e,this.operateType="edit",this.dialogAddEdit=!0},cancel(){this.$message({message:"操作取消",type:"info"}),this.getList(),this.dialogAddEdit=!1},onSubmit(e){this.$refs[e].validate((e=>{e?("add"===this.operateType?this.add():this.edit(),this.dialogAddEdit=!1,console.log("success submit!!")):console.log("error submit!!")}))},add(){this.$axios.post("/admin/add",{params:{adminData:this.adminData}}).then((e=>{console.log(e);const{code:a,message:t}=e.data;200===a?(this.getList(),this.$message({message:t,type:"success"})):this.$message({type:"info",message:t})}))},serach(){var e=this.$refs.searchBar.keywords;console.log(e),this.$axios.post("/admin/search",{params:{keywords:e}}).then((e=>{console.log(e);const{code:a,message:t,data:s}=e.data;200===a?(this.totalCount=s.total,this.adminTabel=s.searchList,this.$message({type:"success",message:t})):(this.getList(),this.$message({type:"info",message:t}))}))},edit(){this.$axios.post("/admin/edit",{params:{adminData:this.adminData}}).then((e=>{console.log(e);const{code:a,message:t}=e.data;200===a?(this.getList(),this.$message({message:t,type:"success"})):this.$message({type:"info",message:"编辑操作失败"})}))},del(e){this.$confirm("此操作将永久删除该管理员, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$axios.post("/admin/del",{params:{id:e.id}}).then((e=>{console.log(e);const{code:a,message:t}=e.data;200===a?(this.getList(),this.$message({type:"success",message:t})):this.$message({type:"info",message:t})}))})).catch((()=>{this.$message({type:"info",message:"已取消删除管理员！"})}))},handleSizeChange(e){this.PageSize=e,this.currentPage=1,this.getList()},handleCurrentChange(e){this.currentPage=e,this.getList()}},mounted(){this.getList()}},l=n,r=t(1001),d=(0,r.Z)(l,s,i,!1,null,"4bcd5bef",null),c=d.exports}}]);
//# sourceMappingURL=155.d14cddcf.js.map